<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Does that use a lot of energy?</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #2d3436;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f1e30 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 1em;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            padding: 20px;
        }

        .products-panel {
            border-right: 2px solid #e5e7eb;
            padding-right: 20px;
            max-height: 500px;
            overflow-y: auto;
        }

        .products-panel h2 {
            color: #2E5F8A;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .product-item {
            background: #f9fafb;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .product-item:hover {
            background: #f3f4f6;
            border-color: #4A90E2;
        }

        .product-item.selected {
            background: #dbeafe;
            border-color: #4A90E2;
        }

        .product-header {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .product-header input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .product-name {
            font-weight: 600;
            color: #1f2937;
            flex: 1;
            font-size: 13px;
        }

        .custom-inputs {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #d1d5db;
            display: none;
        }

        .product-item.selected .custom-inputs {
            display: block;
        }

        .input-row {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .input-group input {
            width: 55px;
            padding: 5px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            font-size: 12px;
            text-align: center;
        }

        .input-group input:focus {
            outline: none;
            border-color: #4A90E2;
        }

        .input-group label {
            font-size: 12px;
            color: #6b7280;
        }

        .fixed-value {
            font-size: 12px;
            color: #6b7280;
            font-style: italic;
        }

        .chart-panel {
            padding-left: 20px;
        }

        .chart-panel h2 {
            color: #2E5F8A;
            margin-bottom: 5px;
            font-size: 1.5em;
        }

        .chart-subtitle {
            color: #6b7280;
            font-size: 1em;
            margin-bottom: 15px;
        }

        .chart-container {
            position: relative;
            height: 500px;
            background: #f9fafb;
            border-radius: 10px;
            padding: 15px;
        }

        .download-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: #4A90E2;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s ease;
            z-index: 10;
        }

        .download-btn:hover {
            background: #2E5F8A;
        }

        .download-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .no-data {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            font-size: 1.2em;
            text-align: center;
        }

        .clear-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin-top: 15px;
            width: 100%;
            transition: background 0.3s ease;
        }

        .clear-btn:hover {
            background: #dc2626;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: #4A90E2;
        }

        .search-box input::placeholder {
            color: #9ca3af;
        }

        .category-header {
            font-size: 1.1em;
            font-weight: 700;
            color: #2E5F8A;
            padding: 15px 0 10px 0;
            margin-top: 15px;
            border-bottom: 2px solid #4A90E2;
        }

        .category-header:first-child {
            margin-top: 0;
        }

        .info-section {
            padding: 0 20px 20px 20px;
            margin-top: -10px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 12px 24px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            bottom: -2px;
        }

        .tab-button:hover {
            color: #4A90E2;
        }

        .tab-button.active {
            color: #2E5F8A;
            border-bottom-color: #4A90E2;
        }

        .tab-content {
            display: none;
            background: #f9fafb;
            border-radius: 10px;
            padding: 20px;
            line-height: 1.6;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h1,
        .tab-content h2 {
            color: #2E5F8A;
            margin-bottom: 12px;
            margin-top: 20px;
        }

        .tab-content h2:first-child {
            margin-top: 0;
        }

        .tab-content h3 {
            color: #2E5F8A;
            margin-bottom: 10px;
            margin-top: 18px;
            font-size: 16px;
        }

        .tab-content h4 {
            color: #4A90E2;
            margin-bottom: 8px;
            margin-top: 14px;
            font-size: 14px;
        }

        .tab-content p {
            margin-bottom: 12px;
            color: #1f2937;
        }

        .tab-content ul {
            margin-left: 20px;
            margin-bottom: 12px;
        }

        .tab-content li {
            margin-bottom: 6px;
            color: #1f2937;
        }

        .tab-content a {
            color: #4A90E2;
            text-decoration: none;
        }

        .tab-content a:hover {
            text-decoration: underline;
        }

        @media (max-width: 1024px) {
            .content {
                grid-template-columns: 1fr;
            }

            .products-panel {
                border-right: none;
                border-bottom: 2px solid #e5e7eb;
                padding-right: 0;
                padding-bottom: 20px;
                max-height: none;
            }

            .chart-panel {
                padding-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Does that use a lot of energy?</h1>
            <p>Compare energy consumption of different products and activities</p>
        </div>

        <div class="content">
            <div class="products-panel">
                <h2>Select Products</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search products..." oninput="filterProducts()">
                </div>
                <div id="productsList"></div>
                <button class="clear-btn" onclick="clearAll()">Clear All Selections</button>
            </div>

            <div class="chart-panel">
                <h2>Energy consumption</h2>
                <p class="chart-subtitle">Estimates measured in watt-hours (Wh).</p>
                <div class="chart-container">
                    <canvas id="energyChart"></canvas>
                    <div class="no-data" id="noData">Select products to compare their energy use</div>
                </div>
            </div>
        </div>

        <div class="info-section">
            <div class="tabs">
                <button class="tab-button active" onclick="switchTab('description')">Description</button>
                <button class="tab-button" onclick="switchTab('methodology')">Methodology</button>
            </div>

            <div id="description" class="tab-content active">
                <p>Rgwerh ryrtbyrtvt</p>
                <p>T</p>
                <p><strong>Description</strong></p>
            </div>

            <div id="methodology" class="tab-content">
                <h2>Methodology and Sources for Energy Consumption Estimates</h2>

                <h3>1. General Methodology</h3>
                <p>All energy consumption values in this tool are measured in watt-hours (Wh), which represents the amount of energy consumed over time. The basic formula for calculating energy consumption is:</p>
                <p><strong>Energy (Wh) = Power (Watts) × Time (Hours)</strong></p>
                <p>For example, a 100-watt light bulb used for 2 hours consumes 200 watt-hours of energy.</p>
                <p>Data sources include U.S. Department of Energy estimates, manufacturer specifications, peer-reviewed research, and industry reports from 2024-2026.</p>

                <h3>2. Lighting</h3>
                <h4>Incandescent Lightbulb (60W)</h4>
                <p>Traditional incandescent bulbs typically range from 25-100 watts, with 60 watts being the standard household bulb. One hour of use = 60 Wh.</p>

                <h4>LED Lightbulb (10W)</h4>
                <p>LED bulbs use approximately 75-85% less energy than incandescent bulbs for equivalent light output. A standard LED replacement for a 60W incandescent uses about 10 watts. One hour of use = 10 Wh.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li>U.S. Department of Energy: <a href="https://www.energy.gov/energysaver/estimating-appliance-and-home-electronic-energy-use" target="_blank">LED light bulbs use at least 75% less energy</a></li>
                    <li>EnergySage: <a href="https://www.energysage.com/electricity/house-watts/how-many-watts-does-a-light-bulb-use/" target="_blank">LED bulbs use about 10 watts on average</a></li>
                </ul>

                <h3>3. Digital Technologies</h3>
                <h4>Charging a Mobile Phone (20 Wh fixed)</h4>
                <p>Modern smartphones have battery capacities of 3,000-5,000 mAh at approximately 3.7-4.2V, resulting in batteries around 15-20 watt-hours. Accounting for charging inefficiency (approximately 10-20% energy loss), a full charge requires about 20 Wh.</p>

                <h4>Watching TV - Medium Efficient (50W)</h4>
                <p>Medium-efficiency TVs (typically LED TVs 40-50 inches) consume approximately 50 watts during active viewing.</p>

                <h4>Watching TV - Large Modern (80W)</h4>
                <p>Larger modern TVs (55-65 inches with 4K capability) typically consume 70-100 watts, with 80 watts being a reasonable average.</p>

                <h4>MacBook (70W)</h4>
                <p>Apple MacBooks vary in power consumption depending on the model and usage, but typical usage ranges from 30-100 watts. A MacBook Pro under moderate use averages around 70 watts.</p>

                <h4>Older PC (50W)</h4>
                <p>Desktop computers vary widely, but older, more efficient models or laptops in standard use consume approximately 50 watts.</p>

                <h4>Gaming Console - Xbox (70W)</h4>
                <p>Gaming consoles like the Xbox Series X consume approximately 60-80 watts during active gameplay, with 70 watts being a reasonable average.</p>

                <h4>Streaming Netflix (18 Wh/hour)</h4>
                <p>Recent studies estimate that streaming one hour of HD video consumes approximately 0.018 kWh (18 Wh) when accounting for device power and network transmission. Values vary based on video quality and device type.</p>

                <h4>Streaming YouTube (20 Wh/hour)</h4>
                <p>Similar to Netflix, YouTube streaming consumes approximately 20 Wh per hour of HD content, slightly higher due to typical streaming patterns and ad delivery.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li>Carbon Brief: <a href="https://www.carbonbrief.org/factcheck-what-is-the-carbon-footprint-of-streaming-video-on-netflix/" target="_blank">Factcheck on streaming video carbon footprint</a></li>
                    <li>IEA: <a href="https://www.iea.org/commentaries/the-carbon-footprint-of-streaming-video-fact-checking-the-headlines" target="_blank">The carbon footprint of streaming video</a></li>
                </ul>

                <h4>ChatGPT Median Query (0.3 Wh)</h4>
                <p>Recent research estimates that a single ChatGPT query using GPT-4o consumes approximately 0.3-0.4 watt-hours of electricity, though this varies based on query complexity and response length.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li><a href="https://research.aimultiple.com/ai-energy-consumption/" target="_blank">Research on AI Energy Consumption (2026)</a></li>
                    <li>Hannah Ritchie: <a href="https://hannahritchie.substack.com/p/carbon-footprint-chatgpt" target="_blank">What's the carbon footprint of using ChatGPT?</a></li>
                </ul>

                <h4>Reading on a Kindle (0.2W)</h4>
                <p>E-readers like the Kindle use e-ink displays which consume power primarily when refreshing the page. Average power consumption during reading is approximately 0.2 watts, with most power used for page turns and wireless connectivity.</p>

                <h3>4. Kitchen Appliances</h3>
                <h4>Boiling a Kettle (100 Wh per full boil)</h4>
                <p>Electric kettles typically have power ratings of 1,500-2,000 watts. Boiling a full kettle (1.5-1.7 liters) typically takes 3-4 minutes, consuming approximately 100 watt-hours.</p>

                <h4>Microwave (100 Wh for 5 minutes)</h4>
                <p>Microwaves typically operate at 800-1,200 watts. Five minutes of microwave use at 1,200 watts = 100 Wh (1200W × 0.083 hours).</p>

                <h4>Electric Oven (1,250 Wh for 30 minutes)</h4>
                <p>Electric ovens typically use 2,000-5,000 watts, with an average around 2,500 watts. Thirty minutes of use = 1,250 Wh.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li>EnergySage: <a href="https://www.energysage.com/electricity/house-watts/how-many-watts-does-an-electric-oven-and-stove-use/" target="_blank">How many watts does an electric oven use?</a></li>
                    <li><a href="https://energyusecalculator.com/electricity_oven.htm" target="_blank">Energy Use Calculator: Electricity usage of an oven</a></li>
                </ul>

                <h4>Gas Oven (1,500 Wh for 30 minutes equivalent)</h4>
                <p>Gas ovens consume natural gas for heating but also use electricity for ignition and controls (approximately 300-400 watts). When converting the thermal energy from gas combustion to electrical equivalents for comparison purposes, gas ovens typically use slightly more total energy than electric ovens due to combustion inefficiency. Thirty minutes = approximately 1,500 Wh equivalent.</p>

                <h4>Air Fryer (200 Wh for 15 minutes)</h4>
                <p>Air fryers typically operate at 800-1,500 watts, with 800 watts being common for smaller models. Fifteen minutes of use = 200 Wh.</p>

                <h4>Electric Induction Hob - One Ring (200 Wh for 15 minutes)</h4>
                <p>Induction hobs are highly efficient, with single burners typically rated at 1,200-2,000 watts. A 1,600-watt burner used for 15 minutes = 400 Wh, though efficient cooking often requires less time. An average of 15 minutes at 800W = 200 Wh.</p>

                <h4>Gas Hob - One Ring (375 Wh for 15 minutes equivalent)</h4>
                <p>Gas hobs convert natural gas to heat. When accounting for the electrical equivalent energy content of the gas consumed, a single burner for 15 minutes = approximately 375 Wh equivalent.</p>

                <h4>Fridge - Small (274 Wh per day)</h4>
                <p>Small refrigerators (under 10 cubic feet) typically consume 200-400 kWh per year, which equals approximately 274 Wh per day on average.</p>

                <h4>Fridge-Freezer (822 Wh per day)</h4>
                <p>Standard refrigerator-freezer combinations (18-20 cubic feet) typically consume 300-800 kWh per year, averaging approximately 822 Wh per day.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li>U.S. EIA: <a href="https://www.eia.gov/energyexplained/use-of-energy/electricity-use-in-homes.php" target="_blank">Electricity use in homes</a></li>
                    <li>Silicon Valley Power: <a href="https://www.siliconvalleypower.com/residents/save-energy/appliance-energy-use-chart" target="_blank">Appliance Energy Use Chart</a></li>
                </ul>

                <h3>5. Washing and Drying</h3>
                <h4>Vacuum Cleaner (128 Wh for 10 minutes)</h4>
                <p>Vacuum cleaners typically use 500-1,500 watts, with 800 watts being a reasonable average. Ten minutes of use = 128 Wh (800W × 0.16 hours).</p>

                <h4>Washing Machine (600 Wh per cycle)</h4>
                <p>Modern washing machines typically use 400-1,400 Wh per cycle, depending on water temperature, load size, and cycle type. A warm water cycle with a medium load averages approximately 600 Wh.</p>

                <h4>Tumble Dryer (4,000 Wh per cycle)</h4>
                <p>Electric tumble dryers are among the highest energy consumers in the home, typically using 2,000-6,000 watts. A full drying cycle (approximately 60 minutes) at 4,000 watts = 4,000 Wh.</p>

                <h4>Dishwasher (1,500 Wh per cycle)</h4>
                <p>Modern dishwashers typically use 1,200-2,400 Wh per cycle, with most energy going to heating water. An average cycle with heated drying = approximately 1,500 Wh.</p>

                <h4>Clothes Iron (320 Wh for 10 minutes)</h4>
                <p>Clothes irons typically operate at 1,000-2,000 watts, with 2,000 watts being common for steam irons. Ten minutes of use = 320 Wh (2000W × 0.16 hours).</p>

                <h3>6. Heating and Cooling</h3>
                <h4>Hairdryer (140 Wh for 5 minutes)</h4>
                <p>Hairdryers typically range from 1,000-2,000 watts, with 1,750 watts being common. Five minutes of use = 140 Wh (1750W × 0.08 hours).</p>

                <h4>Electric Shower (1,600 Wh for 10 minutes)</h4>
                <p>Electric showers are high-power appliances, typically rated at 7,500-10,500 watts. A 10-minute shower at 10,000 watts = 1,600 Wh (10000W × 0.16 hours).</p>

                <h4>Electric Fan (50 Wh per hour)</h4>
                <p>Standard oscillating or desk fans typically use 30-75 watts, with 50 watts being a reasonable average.</p>

                <h4>Small Desk Heater (400 Wh per hour)</h4>
                <p>Small portable electric heaters typically range from 400-1,000 watts. A 400-watt heater = 400 Wh per hour.</p>

                <h4>Large Space Heater (1,500 Wh per hour)</h4>
                <p>Large space heaters typically operate at 1,000-1,500 watts at their highest setting. 1,500 watts for one hour = 1,500 Wh.</p>

                <h4>Electric Heat Pump - Single Room (500 Wh per hour)</h4>
                <p>Modern high-efficiency heat pumps for single rooms (mini-splits) typically consume 400-600 watts per hour of heating operation, being 3-4 times more efficient than resistive heating.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li>ACEEE: <a href="https://www.aceee.org/sites/default/files/publications/researchreports/a1602.pdf" target="_blank">Comparative Energy Use of Residential Gas Furnaces and Electric Heat Pumps</a></li>
                    <li><a href="https://www.hvac.com/expert-advice/heat-pump-vs-gas-furnace/" target="_blank">HVAC.com: Heat pump vs. gas furnace myths</a></li>
                </ul>

                <h4>Gas Heating - Single Room (1,000 Wh per hour equivalent)</h4>
                <p>Gas heating systems convert natural gas to heat. When accounting for the electrical equivalent energy, a typical gas heater for a single room = approximately 1,000 Wh per hour equivalent, though actual efficiency varies by system.</p>

                <h4>Air Conditioning - Single Room (1,000 Wh per hour)</h4>
                <p>Window or portable air conditioning units for single rooms typically use 900-1,500 watts, with 1,000 watts being a reasonable average for medium-sized rooms.</p>

                <h3>7. Driving</h3>
                <h4>Using an E-Bike (25 Wh per mile)</h4>
                <p>Electric bicycles typically consume between 7-33 watt-hours per mile depending on terrain, speed, and assist level. An average value for moderate use is approximately 25 Wh per mile.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li><a href="https://forums.electricbikereview.com/threads/wattage-per-mile-or-kilometre.31480/" target="_blank">Electric Bike Forums: Wattage per mile discussion</a></li>
                    <li>Cycle Volta: <a href="https://www.cyclevolta.com/understanding-e-bike-power-range-and-energy/" target="_blank">Understanding E-Bike Power, Range, and Energy</a></li>
                </ul>

                <h4>Driving an E-Scooter (26 Wh per mile)</h4>
                <p>Electric scooters typically consume 15-150 watt-hours per mile depending on the model and conditions. Personal e-scooters average around 15-30 Wh per mile, with 26 Wh being a reasonable middle estimate.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li>Levy Electric: <a href="https://www.levyelectric.com/resources/understanding-electric-scooter-energy-consumption" target="_blank">Understanding Electric Scooter Energy Consumption</a></li>
                    <li>NREL studies: Approximately 0.15 kWh per mile for shared e-scooters</li>
                </ul>

                <h4>Driving a Petrol Scooter (400 Wh per mile equivalent)</h4>
                <p>Gasoline/petrol scooters consume approximately 70-100 MPG equivalent. When converting the energy content of gasoline to electrical equivalents, this represents approximately 300-500 Wh per mile, with 400 Wh being a reasonable average.</p>

                <h4>Driving an Electric Car (300 Wh per mile)</h4>
                <p>Electric vehicles average approximately 0.3 kWh (300 Wh) per mile, though this varies from 200-400 Wh per mile depending on vehicle efficiency, driving conditions, and speed.</p>
                <p><strong>Sources:</strong></p>
                <ul>
                    <li><a href="https://ev-database.org/cheatsheet/energy-consumption-electric-car" target="_blank">EV Database: Energy consumption of full electric vehicles</a></li>
                    <li><a href="https://evhelphub.com/articles/miles-per-kilowatt-hour/" target="_blank">EV Help Hub: Miles per Kilowatt-Hour explained</a></li>
                    <li>Car and Driver: <a href="https://www.caranddriver.com/features/a36064484/evs-explained-consumption-versus-efficiency/" target="_blank">EVs Explained: Consumption vs. Efficiency</a></li>
                </ul>

                <h4>Driving a Petrol Car (1,000 Wh per mile equivalent)</h4>
                <p>Gasoline vehicles at an average of 25-30 MPG consume approximately 33-40 kWh equivalent per gallon of gasoline (based on the 33.7 kWh energy content per gallon). This translates to approximately 900-1,200 Wh per mile equivalent, with 1,000 Wh being a reasonable average for comparison purposes.</p>

                <h3>8. Important Notes and Limitations</h3>
                <p><strong>1. Variability:</strong> Actual energy consumption varies significantly based on:</p>
                <ul>
                    <li>Product age and efficiency</li>
                    <li>Usage patterns and settings</li>
                    <li>Environmental conditions (temperature, humidity)</li>
                    <li>User behavior</li>
                </ul>

                <p><strong>2. Assumptions:</strong></p>
                <ul>
                    <li>All electric appliance values assume standard grid electricity</li>
                    <li>Gas appliance values are converted to electrical equivalents for comparison purposes</li>
                    <li>Values represent typical residential use cases in moderate climates</li>
                </ul>

                <p><strong>3. Sources:</strong> This tool aggregates data from:</p>
                <ul>
                    <li>U.S. Department of Energy</li>
                    <li>U.S. Energy Information Administration (EIA)</li>
                    <li>Peer-reviewed research publications</li>
                    <li>Manufacturer specifications</li>
                    <li>Industry reports and databases (2024-2026)</li>
                </ul>

                <p><strong>4. Purpose:</strong> These estimates are designed for educational comparison purposes and may not reflect your specific circumstances. For precise measurements, use dedicated energy monitoring equipment.</p>

                <h3>General References</h3>
                <ul>
                    <li>U.S. Department of Energy: <a href="https://www.energy.gov/energysaver/estimating-appliance-and-home-electronic-energy-use" target="_blank">Estimating Appliance and Home Electronic Energy Use</a></li>
                    <li>U.S. EIA: <a href="https://www.eia.gov/energyexplained/use-of-energy/electricity-use-in-homes.php" target="_blank">Electricity use in homes</a></li>
                    <li>EnergySage: <a href="https://www.energysage.com/electricity/house-watts/" target="_blank">How many watts do common appliances use</a></li>
                    <li>Silicon Valley Power: <a href="https://www.siliconvalleypower.com/residents/save-energy/appliance-energy-use-chart" target="_blank">Appliance Energy Use Chart</a></li>
                </ul>

                <p style="margin-top: 20px; font-size: 11px; color: #6b7280;"><em>Last Updated: February 2026</em></p>
            </div>
        </div>
    </div>

    <script>
        let products = [];
        let chart = null;

        async function loadProducts() {
            const response = await fetch('products_data.json');
            products = await response.json();
            renderProductsList();
        }

        function isCategory(product) {
            return product.wattage === null && product.fixed_wh === null;
        }

        function renderProductsList() {
            const container = document.getElementById('productsList');
            container.innerHTML = products.map((product, index) => {
                // Check if this is a category header
                if (isCategory(product)) {
                    return `
                        <div class="category-header" id="product-${index}">
                            ${product.name}
                        </div>
                    `;
                }

                // Regular product item
                return `
                    <div class="product-item" id="product-${index}">
                        <div class="product-header" onclick="toggleProduct(${index})">
                            <input type="checkbox" id="check-${index}" onclick="event.stopPropagation(); toggleProduct(${index})">
                            <span class="product-name">${product.name}</span>
                        </div>
                        <div class="custom-inputs">
                            ${renderInputs(product, index)}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            let lastCategoryIndex = -1;
            let categoryHasVisibleItems = false;

            products.forEach((product, index) => {
                const productDiv = document.getElementById(`product-${index}`);

                if (isCategory(product)) {
                    // Hide previous category if it had no visible items
                    if (lastCategoryIndex >= 0 && !categoryHasVisibleItems) {
                        document.getElementById(`product-${lastCategoryIndex}`).style.display = 'none';
                    }

                    // Start tracking new category
                    lastCategoryIndex = index;
                    categoryHasVisibleItems = false;
                    productDiv.style.display = 'block'; // Will hide later if no items match
                } else {
                    // Regular product
                    if (product.name.toLowerCase().includes(searchTerm)) {
                        productDiv.style.display = 'block';
                        categoryHasVisibleItems = true;
                    } else {
                        productDiv.style.display = 'none';
                    }
                }
            });

            // Handle the last category
            if (lastCategoryIndex >= 0 && !categoryHasVisibleItems) {
                document.getElementById(`product-${lastCategoryIndex}`).style.display = 'none';
            }
        }

        function renderInputs(product, index) {
            switch(product.input_type) {
                case 'hours':
                    const defaultHours = Math.floor(product.default_value);
                    const defaultMinutes = Math.round((product.default_value % 1) * 60);
                    return `
                        <div class="input-row">
                            <div class="input-group">
                                <input type="number" id="input1-${index}" min="0" max="24" value="${defaultHours}" onchange="updateChart()">
                                <label>hours</label>
                            </div>
                            <div class="input-group">
                                <input type="number" id="input2-${index}" min="0" max="59" value="${defaultMinutes}" onchange="updateChart()">
                                <label>minutes</label>
                            </div>
                        </div>
                    `;

                case 'cycles':
                    return `
                        <div class="input-row">
                            <div class="input-group">
                                <input type="number" id="input1-${index}" min="1" value="1" onchange="updateChart()">
                                <label>cycles</label>
                            </div>
                        </div>
                    `;

                case 'boils':
                    return `
                        <div class="input-row">
                            <div class="input-group">
                                <input type="number" id="input1-${index}" min="1" value="1" onchange="updateChart()">
                                <label>full boils</label>
                            </div>
                        </div>
                    `;

                case 'queries':
                    return `
                        <div class="input-row">
                            <div class="input-group">
                                <input type="number" id="input1-${index}" min="1" value="1" onchange="updateChart()">
                                <label>queries</label>
                            </div>
                        </div>
                    `;

                case 'miles':
                    return `
                        <div class="input-row">
                            <div class="input-group">
                                <input type="number" id="input1-${index}" min="1" value="10" onchange="updateChart()">
                                <label>miles</label>
                            </div>
                        </div>
                    `;

                case 'fixed':
                    return `<div class="fixed-value">Fixed: ${product.fixed_wh.toFixed(1)} Wh</div>`;

                default:
                    return '';
            }
        }

        function toggleProduct(index) {
            // Skip if this is a category header
            if (isCategory(products[index])) {
                return;
            }

            const checkbox = document.getElementById(`check-${index}`);
            const productDiv = document.getElementById(`product-${index}`);

            checkbox.checked = !checkbox.checked;

            if (checkbox.checked) {
                productDiv.classList.add('selected');
            } else {
                productDiv.classList.remove('selected');
            }

            updateChart();
        }

        function calculateEnergy(product, index) {
            switch(product.input_type) {
                case 'hours':
                    const hours = parseFloat(document.getElementById(`input1-${index}`).value) || 0;
                    const minutes = parseFloat(document.getElementById(`input2-${index}`).value) || 0;
                    const totalHours = hours + minutes / 60;
                    return product.wattage * totalHours;

                case 'cycles':
                    const cycles = parseFloat(document.getElementById(`input1-${index}`).value) || 1;
                    return product.fixed_wh * cycles;

                case 'boils':
                    const boils = parseFloat(document.getElementById(`input1-${index}`).value) || 1;
                    return product.fixed_wh * boils;

                case 'queries':
                    const queries = parseFloat(document.getElementById(`input1-${index}`).value) || 1;
                    return product.fixed_wh * queries;

                case 'miles':
                    const miles = parseFloat(document.getElementById(`input1-${index}`).value) || 10;
                    return product.wattage * miles;

                case 'fixed':
                    return product.fixed_wh;

                default:
                    return 0;
            }
        }

        function getInputDescription(product, index) {
            switch(product.input_type) {
                case 'hours':
                    const hours = parseFloat(document.getElementById(`input1-${index}`).value) || 0;
                    const minutes = parseFloat(document.getElementById(`input2-${index}`).value) || 0;
                    if (minutes === 0) {
                        return `${hours} hour${hours !== 1 ? 's' : ''} of use`;
                    } else if (hours === 0) {
                        return `${minutes} minute${minutes !== 1 ? 's' : ''} of use`;
                    } else {
                        return `${hours}h ${minutes}m of use`;
                    }

                case 'cycles':
                    const cycles = parseFloat(document.getElementById(`input1-${index}`).value) || 1;
                    return `${cycles} cycle${cycles !== 1 ? 's' : ''}`;

                case 'boils':
                    const boils = parseFloat(document.getElementById(`input1-${index}`).value) || 1;
                    return `${boils} boil${boils !== 1 ? 's' : ''}`;

                case 'queries':
                    const queries = parseFloat(document.getElementById(`input1-${index}`).value) || 1;
                    return `${queries} ${queries !== 1 ? 'queries' : 'query'}`;

                case 'miles':
                    const miles = parseFloat(document.getElementById(`input1-${index}`).value) || 10;
                    return `${miles} mile${miles !== 1 ? 's' : ''} driven`;

                case 'fixed':
                    return 'Per day';

                default:
                    return '';
            }
        }

        function formatWh(value) {
            if (value < 1) {
                return value.toFixed(1);
            } else {
                return Math.round(value).toLocaleString();
            }
        }

        function updateChart() {
            const selectedData = [];

            products.forEach((product, index) => {
                // Skip category headers
                if (isCategory(product)) {
                    return;
                }

                const checkbox = document.getElementById(`check-${index}`);
                if (checkbox && checkbox.checked) {
                    const energy = calculateEnergy(product, index);
                    const description = getInputDescription(product, index);
                    selectedData.push({
                        name: product.name,
                        energy: energy,
                        description: description
                    });
                }
            });

            // Sort by energy value (largest to smallest)
            selectedData.sort((a, b) => b.energy - a.energy);

            // Extract sorted arrays
            const selectedProducts = selectedData.map(d => d.name);
            const energyValues = selectedData.map(d => d.energy);
            const barColor = 'rgba(214, 39, 40, 1)'; // Red color
            const descriptions = selectedData.map(d => d.description);

            const noDataDiv = document.getElementById('noData');

            if (selectedProducts.length === 0) {
                noDataDiv.style.display = 'flex';
                if (chart) {
                    chart.destroy();
                    chart = null;
                }
                return;
            }

            noDataDiv.style.display = 'none';

            const ctx = document.getElementById('energyChart').getContext('2d');

            if (chart) {
                chart.destroy();
            }

            chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: selectedProducts,
                    datasets: [{
                        label: 'Energy Use (Wh)',
                        data: energyValues,
                        backgroundColor: barColor,
                        borderColor: barColor,
                        borderWidth: 2
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    layout: {
                        padding: {
                            left: 20,
                            right: 150
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const desc = descriptions[context.dataIndex];
                                    return `${formatWh(context.parsed.x)} Wh (${desc})`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Energy consumption (Watt-hours)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                maxTicksLimit: 6
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.03)',
                                lineWidth: 1
                            }
                        },
                        y: {
                            ticks: {
                                autoSkip: false,
                                font: {
                                    size: 12
                                },
                                align: 'end'
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                },
                plugins: [{
                    id: 'barLabels',
                    afterDatasetsDraw: function(chart) {
                        const ctx = chart.ctx;
                        const yScale = chart.scales.y;
                        const xScale = chart.scales.x;

                        chart.data.datasets.forEach((dataset, i) => {
                            const meta = chart.getDatasetMeta(i);
                            meta.data.forEach((bar, index) => {
                                const data = dataset.data[index];
                                const desc = descriptions[index];

                                // Wh value at the end of the bar (right side)
                                ctx.fillStyle = '#1f2937';
                                ctx.font = 'bold 14px sans-serif';
                                ctx.textAlign = 'left';
                                ctx.textBaseline = 'middle';
                                const xPosEnd = bar.x + 10;
                                const yPos = bar.y;
                                ctx.fillText(`${formatWh(data)} Wh`, xPosEnd, yPos);

                                // Usage description under the product name (left side)
                                ctx.fillStyle = '#6b7280';
                                ctx.font = 'italic 11px sans-serif';
                                ctx.textAlign = 'right';
                                ctx.textBaseline = 'top';
                                const xPosStart = xScale.left - 5;
                                const yPosDesc = bar.y + 8;
                                ctx.fillText(desc, xPosStart, yPosDesc);
                            });
                        });
                    }
                }]
            });
        }

        function getColor(index) {
            const colors = [
                'rgba(31, 119, 180, 1)',    // Royal blue
                'rgba(255, 127, 14, 1)',    // Orange
                'rgba(44, 160, 44, 1)',     // Green
                'rgba(214, 39, 40, 1)',     // Red
                'rgba(148, 103, 189, 1)',   // Purple
                'rgba(140, 86, 75, 1)',     // Brown
                'rgba(227, 119, 194, 1)',   // Pink
                'rgba(127, 127, 127, 1)',   // Gray
                'rgba(188, 189, 34, 1)',    // Yellow-green
                'rgba(23, 190, 207, 1)'     // Cyan
            ];
            return colors[index % colors.length];
        }

        function clearAll() {
            products.forEach((product, index) => {
                // Skip category headers
                if (isCategory(product)) {
                    return;
                }

                const checkbox = document.getElementById(`check-${index}`);
                const productDiv = document.getElementById(`product-${index}`);
                if (checkbox) {
                    checkbox.checked = false;
                    productDiv.classList.remove('selected');
                }
            });
            updateChart();
        }

        function downloadChart() {
            if (!chart) return;

            // Create a new canvas for the download with high resolution
            const downloadCanvas = document.createElement('canvas');
            const ctx = downloadCanvas.getContext('2d');

            // Use 2x scale for high DPI displays
            const scale = 2;
            const baseWidth = 1200;
            const baseChartHeight = 600 + (chart.data.labels.length * 40);
            const baseHeight = baseChartHeight + 180; // Extra space for title, subtitle, and source

            // Set canvas dimensions at high resolution
            downloadCanvas.width = baseWidth * scale;
            downloadCanvas.height = baseHeight * scale;

            // Fill white background
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, downloadCanvas.width, downloadCanvas.height);

            // Draw title (scaled coordinates and font)
            ctx.fillStyle = '#2E5F8A';
            ctx.font = `bold ${40 * scale}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`;
            ctx.fillText('Energy consumption', 40 * scale, 55 * scale);

            // Draw subtitle (scaled coordinates and font)
            ctx.fillStyle = '#6b7280';
            ctx.font = `${22 * scale}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`;
            ctx.fillText('Estimates measured in watt-hours (Wh).', 40 * scale, 90 * scale);

            // Create a temporary high-res canvas for the chart
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            const chartCanvas = document.getElementById('energyChart');

            tempCanvas.width = (baseWidth - 80) * scale;
            tempCanvas.height = (baseChartHeight - 120) * scale;

            // Draw the chart at high resolution
            tempCtx.drawImage(chartCanvas, 0, 0, tempCanvas.width, tempCanvas.height);

            // Draw the high-res chart onto the download canvas
            ctx.drawImage(tempCanvas, 40 * scale, 110 * scale);

            // Draw source at the bottom (scaled coordinates and font) - reduced gap
            ctx.fillStyle = '#6b7280';
            ctx.font = `${14 * scale}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`;
            const sourceText = `Source: ${window.location.href}`;
            ctx.fillText(sourceText, 40 * scale, (baseHeight - 20) * scale);

            // Download the canvas as PNG
            downloadCanvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.download = 'energy-consumption-chart.png';
                link.href = url;
                link.click();
                URL.revokeObjectURL(url);
            });
        }

        function switchTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });

            // Remove active state from all buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active state to clicked button
            event.target.classList.add('active');
        }

        loadProducts();
    </script>
</body>
</html>
